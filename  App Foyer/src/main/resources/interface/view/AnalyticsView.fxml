<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/19" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="AnalyticsController">
    <top>
        <VBox spacing="8" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="8" right="12" bottom="8" left="12"/>
            </padding>
            <children>
                <Label text="Analytics" styleClass="title"/>
                <BorderPane>
                    <left>
                        <ComboBox fx:id="periodFilterComboBox" prefWidth="160"/>
                    </left>
                    <right>
                        <Button text="Refresh" onAction="#handleRefresh"/>
                    </right>
                </BorderPane>
            </children>
        </VBox>
    </top>
    <center>
        <SplitPane dividerPositions="0.55">
            <items>
                <VBox spacing="8">
                    <padding>
                        <Insets top="8" right="12" bottom="12" left="12"/>
                    </padding>
                    <children>
                        <Label text="Daily Revenue" styleClass="section-title"/>
                        <LineChart fx:id="revenueChart">
                            <xAxis>
                                <CategoryAxis label="Date"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis label="Revenue (€)"/>
                            </yAxis>
                        </LineChart>
                    </children>
                    <VBox.vgrow>
                        <Priority fx:constant="ALWAYS"/>
                    </VBox.vgrow>
                </VBox>
                <VBox spacing="12">
                    <padding>
                        <Insets top="12" right="12" bottom="12" left="0"/>
                    </padding>
                    <children>
                        <Label text="Top Dishes" styleClass="section-title"/>
                        <PieChart fx:id="dishPieChart" prefHeight="250"/>
                        <Label text="Key Metrics" styleClass="section-title"/>
                        <GridPane hgap="12" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints halignment="LEFT"/>
                                <ColumnConstraints halignment="RIGHT"/>
                            </columnConstraints>
                            <children>
                                <Label text="Total Orders"/>
                                <Label fx:id="totalOrdersLabel" text="0" GridPane.columnIndex="1"/>
                                <Label text="Chiffre d'affaires" GridPane.rowIndex="1"/>
                                <Label fx:id="revenueLabel" text="0 €" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                                <Label text="Average Ticket" GridPane.rowIndex="2"/>
                                <Label fx:id="averageTicketLabel" text="0 €" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                            </children>
                        </GridPane>
                    </children>
                </VBox>
            </items>
        </SplitPane>
    </center>
</BorderPane>
